(this["webpackJsonpreact-starter"]=this["webpackJsonpreact-starter"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),s=n.n(c),o=n(15),u=n(3),i=n(5),l=n(1);function d(){var e=Object(u.c)((function(e){return e.session.user}));return e?Object(l.jsxs)("h1",{children:["Hello, ",e.username,"!"]}):Object(l.jsx)("h1",{children:"Hello! Please either log in or sign up!"})}var b=n(6),j="modal/CURRENT",p="modal/TEARDOWN",f="modal/MOORING",h=function(e){return{type:j,Current:e}},O=function(){return{type:p}};var v=n(4),m=n.n(v),x=n(10),g=n(26),w=function(e){var t=document.cookie.split(",").filter((function(t){return t.slice(0,e.length)===e}))[0];return t?t.slice(e.length+1):null},y="errors/SET",C="errors/CLEAR",S=function(e){return{type:y,current:e}},k=function(){return{type:C}};var T={options:["",{headers:{"Content-Type":"application/json"},body:"",method:""}],genericErrors:["Sorry, something went wrong. Please refresh the page and try again."],captureDispatch:function(e){this.dispatch=e},__preFlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{url:"",params:null,body:null},t=arguments.length>1?arguments[1]:void 0;if(this.options[1].headers["XSRF-Token"]=w("XSRF-TOKEN"),"GET"===t&&delete this.options[1].body,this.options[0]=e.url,this.options[1]=Object(b.a)(Object(b.a)({},this.options[1]),{},{method:t}),"/"!==this.options[0][this.options[0].length-1]&&(this.options[0]="".concat(e.url,"/")),e.params)for(var n in e.url+="?",e.params)e.url+="&".concat(n,"=").concat(e.params[n]);e.body&&(this.options[1].body=JSON.stringify(e.body))},__forwardFetch:function(){var e=arguments,t=this;return Object(x.a)(m.a.mark((function n(){var r,a,c,s,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{url:"",params:null,body:null},c=e.length>1&&void 0!==e[1]?e[1]:"GET",t.__preFlight(a,c),n.next=5,(r=window).fetch.apply(r,Object(g.a)(t.options));case 5:if(s=n.sent,n.prev=6,!(s.status>400)){n.next=11;break}return n.next=10,s.json();case 10:throw n.sent;case 11:return n.next=13,s.json();case 13:return n.abrupt("return",n.sent);case 16:return n.prev=16,n.t0=n.catch(6),o=n.t0.errors,t.dispatch(S(o||t.genericErrors)),n.abrupt("return",{});case 21:case"end":return n.stop()}}),n,null,[[6,16]])})))()},get:function(e,t){var n=this;return Object(x.a)(m.a.mark((function r(){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.__forwardFetch({url:e,params:t});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},post:function(e,t){var n=this;return Object(x.a)(m.a.mark((function r(){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.__forwardFetch({url:e,body:t},"POST");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},patch:function(e,t){var n=this;return Object(x.a)(m.a.mark((function r(){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.__forwardFetch({url:e,body:t},"PATCH");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},delete:function(e,t){var n=this;return Object(x.a)(m.a.mark((function r(){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.__forwardFetch({url:e,body:t},"DELETE");case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},restoreCSRF:function(){var e=this;return Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/api/csrf/restore/");case 2:case"end":return t.stop()}}),t)})))()}},E="session/SET",F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:E,user:e}};var _="UX/modal/SHOW",P="UX/modal/HIDE",R=function(){return{type:_}},U=function(){return{type:P}};var N=n(12);function X(e){var t=e.onSubmit,n=e.children,r=Object(u.b)();Object(u.c)((function(e){return e.session.user}))&&(r(O()),r(U()));return Object(l.jsx)("form",{onSubmit:function(e){e.preventDefault(),r(k()),t()},className:"auth-form",children:n})}function D(e){var t=e.type,n=e.onChangeText,r=e.value;return Object(l.jsxs)("label",{children:["username"===t?"Username":"email"===t?"Email":"identification"===t?"Username or email address":"password"===t?"Password":"repeat-password"===t?"Repeat Password":void 0,Object(l.jsx)("input",{className:"auth-input",type:"username"===t||"identification"===t?"text":"email"===t?"email":"password"===t||"repeat-password"===t?"password":void 0,onChange:function(e){var t=e.target.value;return n(t)},value:r,required:!0,placeholder:"username"===t?"Username":"email"===t?"user@website.com":"identification"===t?"Username or email address":"password"===t?"Password":"repeat-password"===t?"Repeat Password":void 0})]})}function H(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(N.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(N.a)(s,2),i=o[0],d=o[1];return Object(l.jsxs)(X,{onSubmit:function(){console.log("login attempted"),e(function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(r){var a,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.post("/api/session/",{identification:e,password:t});case 2:a=n.sent,c=a.user,r(F(c));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,i))},children:[Object(l.jsx)(D,{type:"identification",onChangeText:c,value:a}),Object(l.jsx)(D,{type:"password",onChangeText:d,value:i}),Object(l.jsx)("button",{className:"auth-button",children:"Log In"})]})}function I(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(N.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(N.a)(s,2),i=o[0],d=o[1],b=Object(r.useState)(""),j=Object(N.a)(b,2),p=j[0],f=j[1],h=Object(r.useState)(""),O=Object(N.a)(h,2),v=O[0],g=O[1];return Object(l.jsxs)(X,{onSubmit:function(){e(p===v?function(e,t,n){return function(){var r=Object(x.a)(m.a.mark((function r(a){var c,s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.post("/api/users/",{username:e,email:t,password:n});case 2:c=r.sent,s=c.user,a(F(s));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(a,i,p):S(["Passwords do not match"]))},children:[Object(l.jsx)(D,{type:"username",onChangeText:c,value:a}),Object(l.jsx)(D,{type:"email",onChangeText:d,value:i}),Object(l.jsx)(D,{type:"password",onChangeText:f,value:p}),Object(l.jsx)(D,{type:"repeat-password",onChangeText:g,value:v}),Object(l.jsx)("button",{className:"auth-button",children:"Sign Up"})]})}function L(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.user}));return Object(l.jsx)("nav",{children:t?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.b,{to:"/",children:"Home"}),Object(l.jsx)(o.b,{to:"/users/me/",children:"My Profile"}),Object(l.jsx)("button",{onClick:function(){return e(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/api/session/");case 2:t(F());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log Out"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{onClick:function(){e(h(H)),e(R())},children:"Log In"}),Object(l.jsx)("button",{onClick:function(){e(h(I)),e(R())},children:"Sign Up"})]})})}function A(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.loaded}));return Object(r.useEffect)((function(){T.captureDispatch(e),T.restoreCSRF(),e(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/api/session/");case 2:n=e.sent,r=n.user,t(F(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),t&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(L,{}),Object(l.jsx)(i.c,{children:Object(l.jsx)(i.a,{path:"/",children:Object(l.jsx)(d,{})})})]})}n(42);function G(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.UX.modal})),n=Object(u.c)((function(e){return e.modal.mooring})),r=Object(u.c)((function(e){return e.modal.Current}));return n&&t&&r&&Object(c.createPortal)(Object(l.jsx)("div",{id:"modal-background",onClick:function(){e(O()),e(U())},children:Object(l.jsx)("div",{id:"modal-content",onClick:function(e){return e.stopPropagation()},children:Object(l.jsx)(r,{})})}),n)}var J,M=n(19),W=n(25),q=Object(M.b)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,loaded:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.user;switch(n){case E:return{user:r,loaded:!0};default:return e}},UX:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{modal:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case _:return Object(b.a)(Object(b.a)({},e),{},{modal:!0});case P:return Object(b.a)(Object(b.a)({},e),{},{modal:!1});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Current:null,mooring:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.Current,a=t.mooring;switch(n){case j:return Object(b.a)(Object(b.a)({},e),{},{Current:r});case p:return Object(b.a)(Object(b.a)({},e),{},{Current:null});case f:return Object(b.a)(Object(b.a)({},e),{},{mooring:a});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.current;switch(n){case y:return{current:r};case C:return{current:null};default:return e}}});J=Object(M.a)(W.a);n(43);function B(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.errors.current}));return t&&Object(l.jsxs)("div",{id:"error-bar",children:[t,Object(l.jsx)("button",{onClick:function(){return e(k())},id:"error-close",children:"X"})]})}n(44);var K,z=Object(M.c)(q,K,J);function Q(){var e=Object(u.b)(),t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n;e((n=t.current,{type:f,mooring:n}))}),[e]),Object(l.jsxs)(o.a,{children:[Object(l.jsx)(B,{}),Object(l.jsx)(A,{}),Object(l.jsx)(G,{}),Object(l.jsx)("div",{ref:t,id:"modal"})]})}s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(u.a,{store:z,children:Object(l.jsx)(Q,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.d88f288a.chunk.js.map